{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/quima/OneDrive/Desktop/bantaybuhay/app/api/incidents/route.ts"],"sourcesContent":["import { type NextRequest, NextResponse } from \"next/server\"\nimport type { Incident } from \"@/types\"\n\n// Mock database\nconst incidents: Incident[] = [\n  {\n    id: 1,\n    incident_type: \"gesture_recognition\",\n    responder_id: 2,\n    severity: \"high\",\n    status: \"resolved\",\n    description: \"SOS gesture detected\",\n    location: \"District 1, Main Street\",\n    timestamp: new Date(Date.now() - 3600000).toISOString(),\n    resolved_at: new Date(Date.now() - 1800000).toISOString(),\n    notes: \"Responder helped person safely\",\n  },\n  {\n    id: 2,\n    incident_type: \"sos\",\n    responder_id: 3,\n    severity: \"critical\",\n    status: \"responding\",\n    description: \"Critical emergency detected\",\n    location: \"District 2, Emergency Zone\",\n    timestamp: new Date(Date.now() - 300000).toISOString(),\n  },\n]\n\n// GET incidents with filtering\nexport async function GET(request: NextRequest) {\n  const searchParams = request.nextUrl.searchParams\n  const responder_id = searchParams.get(\"responder_id\")\n  const status = searchParams.get(\"status\")\n\n  let filtered = incidents\n\n  if (responder_id) {\n    filtered = filtered.filter((i) => i.responder_id === Number.parseInt(responder_id))\n  }\n  if (status) {\n    filtered = filtered.filter((i) => i.status === status)\n  }\n\n  return NextResponse.json({\n    success: true,\n    data: filtered,\n  })\n}\n\n// POST create new incident\nexport async function POST(request: NextRequest) {\n  try {\n    const incidentData = await request.json()\n\n    const newIncident: Incident = {\n      id: incidents.length + 1,\n      timestamp: new Date().toISOString(),\n      ...incidentData,\n    }\n\n    incidents.push(newIncident)\n\n    return NextResponse.json({\n      success: true,\n      message: \"Incident reported successfully\",\n      data: newIncident,\n    })\n  } catch (error) {\n    return NextResponse.json({ error: \"Failed to create incident\" }, { status: 500 })\n  }\n}\n"],"names":[],"mappings":";;;;;;AAAA;;AAGA,gBAAgB;AAChB,MAAM,YAAwB;IAC5B;QACE,IAAI;QACJ,eAAe;QACf,cAAc;QACd,UAAU;QACV,QAAQ;QACR,aAAa;QACb,UAAU;QACV,WAAW,IAAI,KAAK,KAAK,GAAG,KAAK,SAAS,WAAW;QACrD,aAAa,IAAI,KAAK,KAAK,GAAG,KAAK,SAAS,WAAW;QACvD,OAAO;IACT;IACA;QACE,IAAI;QACJ,eAAe;QACf,cAAc;QACd,UAAU;QACV,QAAQ;QACR,aAAa;QACb,UAAU;QACV,WAAW,IAAI,KAAK,KAAK,GAAG,KAAK,QAAQ,WAAW;IACtD;CACD;AAGM,eAAe,IAAI,OAAoB;IAC5C,MAAM,eAAe,QAAQ,OAAO,CAAC,YAAY;IACjD,MAAM,eAAe,aAAa,GAAG,CAAC;IACtC,MAAM,SAAS,aAAa,GAAG,CAAC;IAEhC,IAAI,WAAW;IAEf,IAAI,cAAc;QAChB,WAAW,SAAS,MAAM,CAAC,CAAC,IAAM,EAAE,YAAY,KAAK,OAAO,QAAQ,CAAC;IACvE;IACA,IAAI,QAAQ;QACV,WAAW,SAAS,MAAM,CAAC,CAAC,IAAM,EAAE,MAAM,KAAK;IACjD;IAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;QACvB,SAAS;QACT,MAAM;IACR;AACF;AAGO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,eAAe,MAAM,QAAQ,IAAI;QAEvC,MAAM,cAAwB;YAC5B,IAAI,UAAU,MAAM,GAAG;YACvB,WAAW,IAAI,OAAO,WAAW;YACjC,GAAG,YAAY;QACjB;QAEA,UAAU,IAAI,CAAC;QAEf,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,SAAS;YACT,MAAM;QACR;IACF,EAAE,OAAO,OAAO;QACd,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAA4B,GAAG;YAAE,QAAQ;QAAI;IACjF;AACF"}}]
}